set vertical-split = no

# Key
# @ : Suppresses output
# sh : Pipes aren't supported without a subshell
# Note: Can't seem to escape double quotes, you can escape single quotes, but they behave unpredictably. Tig tokens (e.g., "%(file)") evaluate even in single quotes.

bind status T !@git difftool 
bind main T !@git difftool %(commit)^!
bind generic r refresh

# Diff
# Below will work even if tig is opened from a subfolder, but it fails if the path has a space
# bind status D !@sh -c "git diff \'$(git rev-parse --show-toplevel)/%(file)\' | mate --async"
bind status D !@sh -c "git diff '%(file)' | mate --async"
# bind status E !@sh -c "vim -g '%(file)'"
bind status E !@sh -c "mate --async '%(file)'"
# bind status E !@mate %(file)

# Editing
bind status O !@open %(file)
bind status A !@atom %(file)
bind status F !@open --reveal %(file)

# Launchbar
# bind status L !sh -c "osascript -e 'tell application \"LaunchBar\" to open \"$(pwd)/%(file)\"'"

# Copying Hashes
bind generic <Esc>c !@sh -c "echo %(commit) | pbcopy"

# Emacs
bind generic <Ctrl-V> move-page-down

# Magit
bind status s status-update

# Debugging
# bind status Z !sh -c 'cat %(file)'
# bind status Z !sh -c "git diff \'$(git rev-parse --show-toplevel)/%(file)\'"

# Vim
bind generic <Ctrl-B> move-page-up
bind generic <Ctrl-F> move-page-down
bind generic b none
bind generic f move-page-down
bind generic b move-page-up
bind generic h scroll-left
bind generic j move-down
bind generic k move-up
bind generic <Down> move-down
bind generic <Up> move-up
bind generic l scroll-right

bind generic g  none
bind generic gg move-first-line

bind main    G  none
bind generic G  move-last-line

bind generic v  none
bind generic H view-help
bind generic gh view-help
bind generic gm view-main
bind generic gd view-diff
bind generic gl view-log
bind generic gt view-tree
bind generic gb view-blob
bind generic gx view-blame
bind generic gr view-refs
bind generic gs view-status
bind generic gu view-stage
bind generic gy view-stash
bind generic gg view-grep
bind generic gp view-pager

# Colors
# Make the focused split clearer
color title-focus black white bold

